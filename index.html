<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Pronunciation Practice</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 700px;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.5rem;
        }
        
        p {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .settings {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
        }
        
        .setting-group {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            flex: 1;
            min-width: 200px;
        }
        
        .setting-group h3 {
            margin-bottom: 10px;
            color: #555;
            font-size: 1rem;
            text-align: left;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-start;
        }
        
        .option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .option input {
            accent-color: #6e8efb;
        }
        
        .option label {
            color: #555;
            font-size: 0.9rem;
        }
        
        .text-display {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            line-height: 1.5;
            color: #333;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
            position: relative;
        }
        
        .text-display::before {
            content: '"';
            font-size: 60px;
            position: absolute;
            left: 15px;
            top: 10px;
            color: #e0e0e0;
            font-family: serif;
        }
        
        .accuracy {
            font-size: 26px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .accuracy-value {
            font-size: 32px;
            transition: all 0.3s ease;
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        button {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            outline: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #start-btn {
            background: linear-gradient(135deg, #4CAF50, #2E8B57);
            color: white;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }
        
        #record-btn {
            background: linear-gradient(135deg, #2196F3, #0D47A1);
            color: white;
            box-shadow: 0 4px 10px rgba(33, 150, 243, 0.3);
            display: none;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            justify-content: center;
            padding: 0;
        }
        
        #record-btn.recording {
            background: linear-gradient(135deg, #f44336, #B71C1C);
            animation: pulse 1.5s infinite;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            background-color: #f8f9fa;
            display: none;
            text-align: left;
            line-height: 1.8;
        }
        
        .correct {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .incorrect {
            color: #f44336;
            text-decoration: line-through;
            font-weight: bold;
        }
        
        .status {
            margin-top: 20px;
            font-style: italic;
            color: #666;
            min-height: 24px;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(244, 67, 54, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);
            }
        }
        
        .mic-icon {
            font-size: 24px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .settings {
                flex-direction: column;
            }
            
            button {
                padding: 12px 25px;
            }
            
            .text-display {
                font-size: 20px;
                padding: 20px 20px 20px 40px;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>English Pronunciation Practice</h1>
        <p>Select your level and practice type, then click "Start" to begin. Record your pronunciation and get instant feedback!</p>
        
        <div class="settings">
            <div class="setting-group">
                <h3>Difficulty Level</h3>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="beginner" name="level" value="beginner" checked>
                        <label for="beginner">Beginner</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="intermediate" name="level" value="intermediate">
                        <label for="intermediate">Intermediate</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="advanced" name="level" value="advanced">
                        <label for="advanced">Advanced</label>
                    </div>
                </div>
            </div>
            
            <div class="setting-group">
                <h3>Practice Type</h3>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="single-word" name="type" value="word" checked>
                        <label for="single-word">Single Words</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="sentences" name="type" value="sentence">
                        <label for="sentences">Sentences</label>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="accuracy">
            <i class="fas fa-chart-line"></i>
            Accuracy: <span id="accuracy-value" class="accuracy-value">0%</span>
        </div>
        
        <div class="text-display" id="text-display">
            Click the Start button to begin...
        </div>
        
        <div class="buttons">
            <button id="start-btn">
                <i class="fas fa-play"></i>Start
            </button>
            <button id="record-btn">
                <i class="fas fa-microphone mic-icon"></i>
            </button>
        </div>
        
        <div class="result" id="result"></div>
        <div class="status" id="status">Press Start to begin</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const startBtn = document.getElementById('start-btn');
            const recordBtn = document.getElementById('record-btn');
            const textDisplay = document.getElementById('text-display');
            const resultDiv = document.getElementById('result');
            const accuracyValue = document.getElementById('accuracy-value');
            const statusEl = document.getElementById('status');
            
            // Get radio buttons
            const levelRadios = document.querySelectorAll('input[name="level"]');
            const typeRadios = document.querySelectorAll('input[name="type"]');
            
            let recognition;
            let currentText = '';
            let isRecording = false;
            
            // Word and sentence banks by difficulty
            const wordBanks = {
                beginner: [
                    "hello", "world", "apple", "house", "water",
                    "computer", "book", "teacher", "student", "friend",
                    "family", "music", "school", "color", "food"
                ],
                intermediate: [
                    "environment", "pronunciation", "technology", "information", "communication",
                    "development", "education", "government", "international", "organization",
                    "opportunity", "experience", "relationship", "professional", "temperature"
                ],
                advanced: [
                    "onomatopoeia", "idiosyncrasy", "paradigm", "epitome", "quintessential",
                    "ambiguous", "ubiquitous", "vociferous", "supercilious", "magnanimous",
                    "obfuscate", "pernicious", "serendipity", "antidisestablishmentarianism", "floccinaucinihilipilification"
                ]
            };
            
            const sentenceBanks = {
                beginner: [
                    "Hello, how are you?",
                    "I like to read books.",
                    "The weather is nice today.",
                    "What is your name?",
                    "My favorite color is blue.",
                    "I have a dog and a cat.",
                    "Where do you live?",
                    "I'm learning English.",
                    "What time is it?",
                    "This is delicious food."
                ],
                intermediate: [
                    "The quick brown fox jumps over the lazy dog.",
                    "She sells seashells by the seashore.",
                    "How much wood would a woodchuck chuck if a woodchuck could chuck wood?",
                    "I need to improve my pronunciation skills.",
                    "The government announced new environmental policies.",
                    "Technology has transformed communication methods.",
                    "Education provides opportunities for personal development.",
                    "The organization focuses on international cooperation.",
                    "Professional relationships require effective communication.",
                    "The temperature varies significantly between seasons."
                ],
                advanced: [
                    "The phenomenon was an exquisite example of serendipity.",
                    "His magnanimous gesture was appreciated by everyone present.",
                    "The politician's speech was full of obfuscation and ambiguity.",
                    "The scientist's research paradigm shifted after the new discovery.",
                    "The ubiquitous nature of social media affects modern communication.",
                    "The idiosyncrasy of his pronunciation made him difficult to understand.",
                    "The vociferous debate continued late into the night.",
                    "Her supercilious attitude alienated potential collaborators.",
                    "The quintessential elements of the theory were difficult to grasp.",
                    "Antidisestablishmentarianism represents opposition to the withdrawal of state support from a church."
                ]
            };
            
            // Check if browser supports Web Speech API
            if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    checkPronunciation(transcript);
                };
                
                recognition.onend = function() {
                    isRecording = false;
                    recordBtn.classList.remove('recording');
                    statusEl.textContent = "Recording stopped. Processing...";
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error', event.error);
                    isRecording = false;
                    recordBtn.classList.remove('recording');
                    statusEl.textContent = "Error: " + event.error;
                };
            } else {
                alert("Speech recognition is not supported in this browser. Try Chrome or Edge.");
                recordBtn.disabled = true;
            }
            
            startBtn.addEventListener('click', function() {
                // Get selected level and type
                let selectedLevel = 'beginner';
                let selectedType = 'word';
                
                for (const radio of levelRadios) {
                    if (radio.checked) {
                        selectedLevel = radio.value;
                        break;
                    }
                }
                
                for (const radio of typeRadios) {
                    if (radio.checked) {
                        selectedType = radio.value;
                        break;
                    }
                }
                
                // Get a random word or sentence based on selection
                const bank = selectedType === 'word' ? wordBanks[selectedLevel] : sentenceBanks[selectedLevel];
                const randomIndex = Math.floor(Math.random() * bank.length);
                currentText = bank[randomIndex];
                
                // Display the text
                textDisplay.textContent = currentText;
                
                // Show record button
                recordBtn.style.display = 'flex';
                startBtn.style.display = 'none';
                
                // Reset accuracy
                accuracyValue.textContent = '0%';
                accuracyValue.style.color = '#333';
                resultDiv.style.display = 'none';
                
                statusEl.textContent = "Click the microphone button and read the text aloud";
            });
            
            recordBtn.addEventListener('click', function() {
                if (!isRecording) {
                    recognition.start();
                    isRecording = true;
                    recordBtn.classList.add('recording');
                    statusEl.textContent = "Recording... Speak now";
                } else {
                    recognition.stop();
                    isRecording = false;
                    recordBtn.classList.remove('recording');
                    statusEl.textContent = "Stopping recording...";
                }
            });
            
            function checkPronunciation(userSpeech) {
                statusEl.textContent = "Checking your pronunciation...";
                
                // Simple algorithm to compare spoken text with target text
                const targetWords = currentText.toLowerCase().replace(/[.,?!]/g, '').split(' ');
                const spokenWords = userSpeech.toLowerCase().replace(/[.,?!]/g, '').split(' ');
                
                let correctCount = 0;
                let resultHTML = '';
                
                // Compare word by word
                for (let i = 0; i < targetWords.length; i++) {
                    if (i < spokenWords.length && spokenWords[i] === targetWords[i]) {
                        correctCount++;
                        resultHTML += `<span class="correct">${targetWords[i]}</span> `;
                    } else {
                        resultHTML += `<span class="incorrect">${targetWords[i]}</span> `;
                    }
                }
                
                // Add any extra words that were spoken
                if (spokenWords.length > targetWords.length) {
                    for (let i = targetWords.length; i < spokenWords.length; i++) {
                        resultHTML += `<span class="incorrect">[${spokenWords[i]}]</span> `;
                    }
                }
                
                // Calculate accuracy percentage
                const accuracy = Math.round((correctCount / targetWords.length) * 100);
                
                // Display results
                resultDiv.innerHTML = resultHTML;
                resultDiv.style.display = 'block';
                accuracyValue.textContent = `${accuracy}%`;
                
                // Change accuracy color based on performance
                if (accuracy >= 80) {
                    accuracyValue.style.color = '#4CAF50';
                } else if (accuracy >= 50) {
                    accuracyValue.style.color = '#FF9800';
                } else {
                    accuracyValue.style.color = '#f44336';
                }
                
                statusEl.textContent = "Pronunciation check completed. Click the microphone to try again or Start for a new text.";
                
                // Show start button again
                startBtn.style.display = 'flex';
            }
        });
    </script>
</body>
                                     </html>
